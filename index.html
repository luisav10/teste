<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voo Vocacional</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/136/136724.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');
        @font-face {
            font-family: caixaalta;
            src: url(fonte/BarberChop.otf);
        }
        body {
            font-family: 'Quicksand', sans-serif;
            background-image: url('https://i.pinimg.com/originals/b6/e3/ef/b6e3ef535fc0f404923b5f939d367b9a.gif'), url('https://static.vecteezy.com/ti/vetor-gratis/p1/42818355-8-bits-pixel-grafico-azul-ceu-fundo-com-nuvens-vetor.jpg'); 
            background-position: center;
            background-attachment: fixed;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #4a5568;
            overflow: hidden;
            position: relative;
        }
        .main-container {
            background-color: rgb(255, 255, 255);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            padding: 2.5rem;
            width: 95%;
            
            text-align: center;
            transition: all 0.5s ease-in-out;
            position: relative;
        }
        .rainbow-title {
            background: linear-gradient(to left, #00a8d4, #9cbb17, #fae41e, #fc803f, #ee4035);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 1000;
            font-family: caixaalta;
            font-size: 4rem;
        }
        #start-screen h1{
            font-size: 70px;
        }
        .dialogue-box {
            background-color: #f0faff;
            color: #2c5282;
            padding: 1rem;
            border-radius: 0.75rem;
            border: 1px solid #00a8d4;
            font-style: italic;
            margin-bottom: 2rem;
            position: relative;
            text-align: center;
        }
        .start-btn {
            background: #00a8d4;
            color: #ffffff;
            padding: 1rem 2.5rem;
            border-radius: 9999px;
            font-weight: 700;
            font-size: 1.25rem;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        #botoesinicio{
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .quiz-section, .courses-section, .choose-course-section, .mini-quiz-section, .memory-game-section, .rock-paper-scissors-section, .tictactoe-section {
            display: none;
            height: 95%;
        }
        .question-card {
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 1.5rem;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            text-align: left;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem;
            margin-top: 2.5rem;
        }
        .option-btn {
            padding: 1.5rem;
            border-radius: 1.5rem;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            color: #4a5568;
            background: #e2e8f0;
            border: 2px solid #cbd5e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
        }
        .option-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            background: #d4eaf7;
        }
        
        .option-btn[draggable="true"] {
            cursor: grab;
        }

        /* Animação para o clique com a nova cor */
        .option-btn.selected {
            animation: pulse 0.5s ease-in-out;
            background-color:#e2e8f0c4; /* Novo verde vivo */
            color: 4a5568;
            border-color: #e2e8f08a; /* Novo verde vivo */
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .sentence-container {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 500;
        }
        
        .droppable-placeholder {
            display: inline-block;
            min-width: 150px;
            min-height: 2rem;
            background-color: #e2e8f0;
            border: 1px dashed black;
            border-radius: 0.5rem;
            margin: 0 0.5rem;
            transition: all 0.3s ease-in-out;
            text-align: center;
            line-height: 2rem;
            color: transparent; /* Esconde o texto, se houver */
        }
        
        .droppable-placeholder.active {
            background-color: #d4eaf7;
            border-color: #fae41e;
        }
        
        .droppable-placeholder.filled {
            background: #e2e8f0;
            border: 2px solid #cbd5e0;
            color: #4a5568;
            padding: 0 0.5rem;
        }
        
        .result-card {
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 2rem;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 2px solid #00a8d4;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1000px;
        }
        .result-layout {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 2rem;
            width: 100%;
        }
        .result-layout > div {
            flex: 1 1 350px;
        }
        /* Correção para exibir a barra de progresso */
        .progress-bar {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 600px;
            height: 12px;
            background-color: #e2e8f0;
            border-radius: 9999px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
            display: none;
        }
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(to right, #00a8d4, #9cbb17, #fae41e, #fc803f, #ee4035);
            border-radius: 9999px;
            transition: width 0.5s ease-in-out;
        }
        .courses-list {
            text-align: left;
            margin-top: 2rem;
            max-height: 500px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        .course-item {
            background-color: #f0faff;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #00a8d4;
        }
        .back-button-icon {
            position: absolute;
            top: 1.5rem;
            left: 2rem;
            font-size: 1.5rem;
            color: #4a5568;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .back-button-icon:hover {
            transform: scale(1.2);
        }
        #result-course-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        .course-icon-in-title {
            font-size: 3rem;
            color: #00a8d4;
            margin-right: 1rem;
        }
        #result-course {
            font-size: 2.5rem;
            font-weight: 700;
            color: #00a8d4;
            text-align: center;
        }
        .audio-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            color: #00a8d4;
            cursor: pointer;
            transition: transform 0.3s;
            z-index: 1000;
        }
        .audio-button:hover {
            transform: scale(1.2);
        }
        .character-name {
            font-weight: 700;
            color: #9cbb17;
        }
        .question-color-1 { background-color: #00a8d4; color: white; }
        .question-color-2 { background-color: #9cbb17; color: white; }
        .question-color-3 { background-color: #fae41e; color: black; }
        .question-color-4 { background-color: #fc803f; color: white; }
        .question-color-5 { background-color: #ee4035; color: white; }
        #affinity-chart-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        .info-left, .chart-right {
            text-align: center;
        }
        #course-icon {
            font-size: 4rem;
            color: #00a8d4;
            margin-bottom: 1.5rem;
            margin-top: 1.5rem;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            border: 2px solid #00a8d4;
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 2rem;
            font-size: 1.5rem;
            color: #00a8d4;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .modal-close:hover {
            transform: scale(1.2);
        }

        /* Novas classes para a mecânica de slider */
        .slider-container {
            width: 100%;
            padding: 1.5rem;
            background-color: #f0faff;
            border-radius: 1rem;
            border: 1px solid #00a8d4;
            margin-top: 1.5rem;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }
        .slider-value {
            font-weight: 700;
            color: #00a8d4;
            margin-top: 0.5rem;
        }
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 10px;
            background: #cbd5e0;
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
            border-radius: 9999px;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            background: #00a8d4;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
        }
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            background: #00a8d4;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        /* Novas classes para a mecânica de ordenação */
        .sortable-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }
        .sortable-item {
            padding: 1rem;
            border-radius: 1.5rem;
            color: #4a5568;
            background: #e2e8f0;
            border: 2px solid #cbd5e0;
            cursor: grab;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .sortable-item:active {
            cursor: grabbing;
        }
        .sortable-item.dragging {
            opacity: 0.5;
            border: 2px dashed #00a8d4;
            transform: scale(1.02);
        }
        .sortable-item i {
            margin-right: 1rem;
            color: #00a8d4;
        }
        .sortable-number {
            font-weight: bold;
            font-size: 1.25rem;
            margin-right: 1rem;
            background-color: #00a8d4;
            color: white;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .submit-btn {
            background: #9cbb17;
            color: #ffffff;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-top: 2rem;
        }
        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Alterações para o layout de duas linhas */
        .choose-course-section {
            max-width: 1200px;
            width: 95%;
            margin: auto;
            min-height: 100vh; /* Garante que a div tenha altura total para centralização */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centraliza verticalmente o conteúdo */
            align-items: center; /* Centraliza horizontalmente o conteúdo */
        }
        .choose-course-section .content-wrapper {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            padding: 2.5rem;
            width: 100%;
            border: 2px solid #00a8d4;
            position: relative;
        }

        .choose-course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* Layout responsivo */
            gap: 1.5rem;
            margin-top: 2rem;
            justify-content: center;
        }
        
        .choose-course-item {
            background-color: #f0faff;
            padding: 1.5rem;
            border-radius: 1rem;
            border: 2px solid #00a8d4;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .choose-course-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Estilos do Jogo da Memória */
        .memory-game-section .main-container {
            max-width: 600px;
        }

        .memory-game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            perspective: 1000px;
            
        }

        .memory-card {
            width: 85px;
            height: 85px;
            position: relative;
            transform: scale(1);
            transform-style: preserve-3d;
            transition: transform .5s;
            cursor: pointer;
            border-radius: 1rem;
        }

        .memory-card:active {
            transform: scale(0.97);
            transition: transform .2s;
        }

        .memory-card.flip {
            transform: rotateY(180deg);
        }

        .front-face,
        .back-face {
            width: 100%;
            height: 100%;
            position: absolute;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border-radius: 1rem;
            border: 2px solid #00a8d4;
        }

        .front-face {
            transform: rotateY(180deg);
            background-color: #f0faff;
            color: #00a8d4;
        }
        
        .back-face {
            background-color: #00a8d4;
            color: #ffffff;
            font-family: caixaalta;
            font-size: 2rem;
        }
        
        /* Estilos do Jokenpô (Pedra, Papel, Tesoura) */
        .rock-paper-scissors-section .main-container {
            max-width: 600px;
        }
        .jokenpo-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .jokenpo-btn {
            font-size: 3rem;
            padding: 20px;
            background-color: #f0faff;
            border: 2px solid #00a8d4;
            border-radius: 1rem;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .jokenpo-btn:hover {
            transform: scale(1.1);
        }
        .jokenpo-result {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* Estilos do Jogo da Velha (Tic Tac Toe) */
        .tictactoe-section .main-container {
            max-width: 400px;
            min-height: fit-content;
        }
        .tictactoe-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .tictactoe-cell {
            width: 100px;
            height: 100px;
            background-color: #f0faff;
            border: 2px solid #00a8d4;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .tictactoe-cell:hover {
            background-color: #d4eaf7;
        }
        .tictactoe-status {
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <audio id="background-audio" loop autoplay>
        <source src="https://www.soundimage.org/wp-content/uploads/2018/06/Magical-Unicorn-Dreams.mp3" type="audio/mpeg">
    </audio>

    <i id="audio-button" class="fas fa-volume-up audio-button"></i>

    <div id="start-screen" class="screen flex-col items-center p-6">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-8 text-center rainbow-title">Voo Vocacional</h1>
        <div class="main-container">
            <h2 class="text-2xl font-bold mb-4 text-gray-700">Bem-vindo à Fatec!</h2>
            <p class="text-lg mb-12 font-light text-gray-500">
                Este teste vocacional irá te auxiliar a encontrar um curso que combine com você ou testar sua compatibilidade com um algum curso que você já pensa em fazer!
            </p>
            <div id="botoesinicio" class="flex gap-4 justify-center flex-wrap">
                <button id="start-button" class="start-btn">
                    Descubra seu curso <i class="fas fa-arrow-right ml-2"></i>
                </button>
                <button id="start-mini-quiz-button" class="start-btn bg-purple-600 hover:bg-purple-700 transition-colors duration-300">
                    Compatibilidade <i class="fas fa-arrow-right ml-2"></i>
                </button>
                <button id="show-courses-button" class="start-btn bg-gray-400 hover:bg-gray-500 transition-colors duration-300">
                    Ver os cursos
                </button>
            </div>
        </div>
    </div>
    
    <div id="choose-course-screen" class="screen choose-course-section">
        <div class="content-wrapper">
            <i id="back-button-icon-choose" class="fas fa-arrow-left back-button-icon"></i>
            <h2 class="text-3xl font-bold mb-2 text-gray-700 text-center">Compatibilidade</h2>
            <p class="text-md mb-8 text-gray-500 text-center">
                Selecione o que você deseja cursar!
            </p>
            <div id="choose-course-grid" class="choose-course-grid"></div>
        </div>
    </div>

    <div id="courses-screen" class="main-container courses-section">
        <i id="back-button-icon-courses" class="fas fa-arrow-left back-button-icon"></i>
        <h2 class="text-3xl font-bold mb-4 text-gray-700">Todos os Cursos</h2>
        <div id="courses-list" class="courses-list"></div>
    </div>

    <div id="quiz-screen" class="screen quiz-section relative flex-col items-center justify-center w-full">
        <div id="progress-bar" class="progress-bar">
            <div id="progress-bar-fill" class="progress-bar-fill" style="width: 0%;"></div>
        </div>
        <div id="question-card" class="main-container question-card">
            <div class="dialogue-box">
                <p id="question-text" class="text-lg font-normal"></p>
            </div>
            <div id="dynamic-content">
                </div>
        </div>
    </div>

    <div id="memory-game-screen" class="screen memory-game-section">
        <i id="back-button-icon-memory" class="fas fa-arrow-left back-button-icon"></i>
        <div class="main-container">
            <h2 class="text-3xl font-bold mb-4 text-gray-700">Jogo da Memória</h2>
            <p class="text-md mb-8 text-gray-500">
                Encontre os pares para desbloquear a próxima fase!
            </p>
            <div id="memory-game-grid" class="memory-game-grid"></div>
        </div>
    </div>

    <div id="rock-paper-scissors-screen" class="screen rock-paper-scissors-section">
        <i id="back-button-icon-jokenpo" class="fas fa-arrow-left back-button-icon"></i>
        <div class="main-container">
            <h2 class="text-3xl font-bold mb-4 text-gray-700">Pedra, Papel e Tesoura</h2>
            <p class="text-md mb-4 text-gray-500">
                Vença o computador 3 vezes para continuar o quiz!
            </p>
            <div class="jokenpo-options">
                <button id="jokenpo-rock" class="jokenpo-btn">&#x1F44A;</button>
                <button id="jokenpo-paper" class="jokenpo-btn">&#x1F590;</button>
                <button id="jokenpo-scissors" class="jokenpo-btn">&#x270C;</button>
            </div>
            <p id="jokenpo-result" class="jokenpo-result"></p>
            <p id="jokenpo-score" class="mt-4 font-semibold text-lg"></p>
        </div>
    </div>

    <div id="tictactoe-screen" class="screen tictactoe-section">
        <i id="back-button-icon-tictactoe" class="fas fa-arrow-left back-button-icon"></i>
        <div class="main-container">
            <h2 class="text-3xl font-bold mb-4 text-gray-700">Jogo da Velha</h2>
            <p class="text-md mb-4 text-gray-500">
                Vença a Fatec para desbloquear a próxima pergunta!
            </p>
            <div id="tictactoe-grid" class="tictactoe-grid">
                <div class="tictactoe-cell" data-cell-index="0"></div>
                <div class="tictactoe-cell" data-cell-index="1"></div>
                <div class="tictactoe-cell" data-cell-index="2"></div>
                <div class="tictactoe-cell" data-cell-index="3"></div>
                <div class="tictactoe-cell" data-cell-index="4"></div>
                <div class="tictactoe-cell" data-cell-index="5"></div>
                <div class="tictactoe-cell" data-cell-index="6"></div>
                <div class="tictactoe-cell" data-cell-index="7"></div>
                <div class="tictactoe-cell" data-cell-index="8"></div>
            </div>
            <p id="tictactoe-status" class="tictactoe-status"></p>
            <button id="tictactoe-restart" class="submit-btn mt-4 hidden">Recomeçar</button>
        </div>
    </div>

    <div id="mini-quiz-screen" class="screen mini-quiz-section relative flex-col items-center justify-center w-full">
        <i id="back-button-icon-mini-quiz" class="fas fa-arrow-left back-button-icon"></i>
        <div id="mini-quiz-progress-bar" class="progress-bar">
            <div id="mini-quiz-progress-bar-fill" class="progress-bar-fill" style="width: 0%;"></div>
        </div>
        <div id="mini-quiz-card" class="main-container question-card">
            <div class="dialogue-box">
                <p id="mini-quiz-question-text" class="text-lg font-normal"></p>
            </div>
            <div id="mini-quiz-dynamic-content">
                </div>
        </div>
    </div>

    <div id="result-screen" class="screen quiz-section">
        <div id="result-card" class="main-container result-card">
            <h2 id="result-title" class="text-3xl md:text-4xl font-extrabold mb-4 rainbow-title">Você combina com:</h2>
            <div id="result-course-container">
                <i id="course-icon-in-title" class="course-icon-in-title"></i>
                <p id="result-course"></p>
            </div>
            <div class="result-layout">
                <div class="info-left text-left">
                    <div id="course-description" class="description-box bg-gray-100 p-4 rounded-lg mt-4"></div>
                </div>
                <div class="chart-right text-right">
                    <h3 class="text-2xl font-bold mb-4 text-gray-700">Seu ranking de cursos</h3>
                    <div id="affinity-chart-container">
                        <canvas id="affinityChart"></canvas>
                    </div>
                </div>
            </div>
            <button id="restart-button" class="start-btn mt-6">
                Volte para a página inicial <i class="fas fa-redo ml-2"></i>
            </button>
        </div>
    </div>
    
    <div id="mini-quiz-result-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 class="text-3xl font-bold mb-4 text-gray-700">Porcentagem</h3>
            <p id="mini-quiz-result-text" class="text-lg mb-4 text-gray-600"></p>
            <div id="mini-quiz-progress-circle" class="relative w-40 h-40 mx-auto my-8">
                <canvas id="miniQuizChart"></canvas>
                <div class="absolute inset-0 flex flex-col items-center justify-center">
                    <span id="mini-quiz-percentage" class="text-4xl font-bold text-gray-800"></span>
                    <span class="text-sm text-gray-500"></span>
                </div>
            </div>
            <button id="restart-mini-quiz-btn" class="start-btn">
                Tentar Outro Curso <i class="fas fa-redo ml-2"></i>
            </button>
        </div>
    </div>
    
    <div id="tutorial-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <i id="close-modal" class="fas fa-times modal-close"></i>
            <h3 class="text-3xl font-bold mb-4 text-gray-700">Atenção</h3>
            <p class="text-lg mb-4 text-gray-600">
                Responda a todas as perguntas para descobrir qual curso mais combina com você!
            </p>
            <p class="text-lg mb-8 text-gray-600">
                
            </p>
            <p class="text-md mb-8 text-purple-600 font-bold">
                 Este quiz possuí minigames integrados para uma experiência ainda mais completa! Vença eles para conseguir receber seu resultado.
            </p>
            <button id="start-quiz-from-modal" class="start-btn">
                Vamos Lá! <i class="fas fa-play ml-2"></i>
            </button>
        </div>
    </div>

<script>
    const startScreen = document.getElementById('start-screen');
    const coursesScreen = document.getElementById('courses-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const startButton = document.getElementById('start-button');
    const showCoursesButton = document.getElementById('show-courses-button');
    const startMiniQuizButton = document.getElementById('start-mini-quiz-button');
    const backButtonIconCourses = document.getElementById('back-button-icon-courses');
    const backButtonIconChoose = document.getElementById('back-button-icon-choose');
    const backButtonIconMiniQuiz = document.getElementById('back-button-icon-mini-quiz');
    const backButtonIconMemory = document.getElementById('back-button-icon-memory');
    const backButtonIconJokenpo = document.getElementById('back-button-icon-jokenpo');
    const backButtonIconTictactoe = document.getElementById('back-button-icon-tictactoe');
    const restartButton = document.getElementById('restart-button');
    const questionText = document.getElementById('question-text');
    const dynamicContent = document.getElementById('dynamic-content');
    const progressBarFill = document.getElementById('progress-bar-fill');
    const progressBar = document.getElementById('progress-bar');
    const coursesListContainer = document.getElementById('courses-list');
    const backgroundAudio = document.getElementById('background-audio');
    const audioButton = document.getElementById('audio-button');
    const tutorialModal = document.getElementById('tutorial-modal');
    const closeModalBtn = document.getElementById('close-modal');
    const startQuizFromModalBtn = document.getElementById('start-quiz-from-modal');
    const chooseCourseScreen = document.getElementById('choose-course-screen');
    const chooseCourseGrid = document.getElementById('choose-course-grid');
    const miniQuizScreen = document.getElementById('mini-quiz-screen');
    const miniQuizQuestionText = document.getElementById('mini-quiz-question-text');
    const miniQuizDynamicContent = document.getElementById('mini-quiz-dynamic-content');
    const miniQuizProgressBarFill = document.getElementById('mini-quiz-progress-bar-fill');
    const miniQuizProgressBar = document.getElementById('mini-quiz-progress-bar');
    const miniQuizResultModal = document.getElementById('mini-quiz-result-modal');
    const miniQuizResultText = document.getElementById('mini-quiz-result-text');
    const miniQuizPercentage = document.getElementById('mini-quiz-percentage');
    const restartMiniQuizBtn = document.getElementById('restart-mini-quiz-btn');

    // Elementos dos Mini-jogos
    const memoryGameScreen = document.getElementById('memory-game-screen');
    const memoryGameGrid = document.getElementById('memory-game-grid');

    const rockPaperScissorsScreen = document.getElementById('rock-paper-scissors-screen');
    const jokenpoResult = document.getElementById('jokenpo-result');
    const jokenpoScore = document.getElementById('jokenpo-score');
    const jokenpoButtons = document.querySelectorAll('.jokenpo-btn');

    const tictactoeScreen = document.getElementById('tictactoe-screen');
    const tictactoeGrid = document.getElementById('tictactoe-grid');
    const tictactoeStatus = document.getElementById('tictactoe-status');
    const tictactoeRestartBtn = document.getElementById('tictactoe-restart');

    
    let affinityChartInstance = null;
    let miniQuizChartInstance = null;
    let currentQuestionIndex = 0;
    let scores = {};
    let miniQuizQuestions = [];
    let currentMiniQuizQuestionIndex = 0;
    let miniQuizScore = 0;
    let selectedMiniQuizCourse = '';
    
    // Variáveis dos Mini-jogos
    // Memória
    let hasFlippedCard = false;
    let lockBoard = false;
    let firstCard, secondCard;
    let matchedPairsCount = 0;
    const totalPairs = 8;
    
    // Jokenpô
    let jokenpoWins = 0;
    const jokenpoTargetWins = 3;

    // Jogo da Velha
    let tictactoeBoard = ['', '', '', '', '', '', '', '', ''];
    let tictactoePlayer = 'X';
    let tictactoeGameActive = true;
    const tictactoeWinningConditions = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
    ];


    const questionColors = ['question-color-1', 'question-color-2', 'question-color-3', 'question-color-4', 'question-color-5'];
    
    // Ordem dos minigames antes das perguntas
    const miniGamesSequence = ['memory', 'jokenpo', 'tictactoe'];
    let currentMiniGameIndex = 0;


    const courses = {
        'Administração': {
            description: 'Trabalha com o planejamento, organização e controle de recursos de uma empresa.',
            areas: 'Gestão Empresarial, Finanças, Marketing, Recursos Humanos.',
            icon: 'fas fa-chart-line',
            traits: ['Liderança', 'Organização', 'Estratégia', 'Análise']
        },
        'Comércio Exterior': {
            description: 'Gerencia processos de compra e venda de produtos e serviços entre países.',
            areas: 'Importação e Exportação, Logística Internacional, Câmbio e Negociação.',
            icon: 'fas fa-globe-americas',
            traits: ['Negociação', 'Comunicação', 'Global', 'Liderança']
        },
        'Cuidados de Idosos': {
            description: 'Profissional especializado em proporcionar bem-estar e qualidade de vida para pessoas idosas.',
            areas: 'Saúde e Higiene, Nutrição, Atividades Recreativas, Acompanhamento.',
            icon: 'fas fa-hands-helping',
            traits: ['Empatia', 'Paciência', 'Cuidado', 'Dedicação']
        },
        'Desenvolvimento de Sistemas': {
            description: 'Cria, projeta e mantém softwares e aplicativos, resolvendo problemas com código.',
            areas: 'Programação Web, Desenvolvimento Mobile, Análise de Sistemas, Banco de Dados.',
            icon: 'fas fa-laptop-code',
            traits: ['Lógica', 'Resolução de Problemas', 'Inovação', 'Criatividade']
        },
        'Informática para Internet': {
            description: 'Desenvolve e mantém sites e aplicativos para a web, com foco na interface e lógica.',
            areas: 'Criação de Sites, Front-end, Back-end, E-commerce, Design Digital.',
            icon: 'fas fa-wifi',
            traits: ['Criatividade', 'Inovação', 'Visual', 'Lógica']
        },
        'Logística': {
            description: 'Organiza e gerencia a movimentação e armazenamento de produtos.',
            areas: 'Gestão de Estoques, Distribuição e Transporte, Cadeia de Suprimentos.',
            icon: 'fas fa-truck',
            traits: ['Organização', 'Planejamento', 'Eficiência', 'Detalhes']
        },
        'Marketing': {
            description: 'Cria estratégias para divulgar produtos, serviços e marcas de forma eficaz.',
            areas: 'Marketing Digital, Pesquisa de Mercado, Análise de Dados, Branding.',
            icon: 'fas fa-bullhorn',
            traits: ['Comunicação', 'Estratégia', 'Criatividade', 'Análise']
        },
        'Recursos Humanos': {
            description: 'Cuida da gestão de pessoas em uma empresa, buscando o bem-estar dos colaboradores.',
            areas: 'Recrutamento e Seleção, Treinamento, Benefícios, Relações Trabalhistas.',
            icon: 'fas fa-users',
            traits: ['Empatia', 'Comunicação', 'Liderança', 'Organização']
        },
        'Segurança do Trabalho': {
            description: 'Atua na prevenção de acidentes e doenças ocupacionais em ambientes de trabalho.',
            areas: 'Prevenção de Acidentes, Normas de Segurança, Análise de Riscos, Ergonomia.',
            icon: 'fas fa-hard-hat',
            traits: ['Detalhes', 'Prevenção', 'Responsabilidade', 'Lógica']
        },
        'Serviços Jurídicos': {
            description: 'Presta apoio técnico a advogados e escritórios de advocacia.',
            areas: 'Documentação Jurídica, Pesquisa de Legislação, Apoio a Processos.',
            icon: 'fas fa-gavel',
            traits: ['Análise', 'Organização', 'Detalhes', 'Pesquisa']
        }
    };

    const questions = [
        {
            type: 'click',
            question: "Num mundo de jogos, qual seria seu papel ideal?",
            options: [
                { text: "O estrategista que monta o plano de ataque para o time.", points: { 'Administração': 2, 'Logística': 1 } },
                { text: "O que ajuda a guild a resolver conflitos e se manter unida.", points: { 'Recursos Humanos': 2, 'Cuidados de Idosos': 1 } },
                { text: "O que encontra falhas no código do jogo para criar novas funcionalidades.", points: { 'Desenvolvimento de Sistemas': 2, 'Informática para Internet': 2 } },
                { text: "O influenciador que faz streams e cria o hype em volta do jogo.", points: { 'Marketing': 1, 'Comércio Exterior': 1 } }
            ]
        },
        {
            type: 'click',
            question: "Se você fosse um animal, qual seria sua principal característica?",
            options: [
                { text: "O instinto de leão, defendendo a equipe e seus objetivos.", points: { 'Administração': 2, 'Recursos Humanos': 2 } },
                { text: "A paciência e o carinho de um gato com quem precisa de ajuda.", points: { 'Recursos Humanos': 2, 'Cuidados de Idosos': 2 } },
                { text: "A criatividade de um camaleão, se adaptando a qualquer ambiente digital.", points: { 'Informática para Internet': 2, 'Marketing': 2 } },
                { text: "A audácia de uma águia, planejando voos longos e observando tudo de longe.", points: { 'Logística': 2, 'Comércio Exterior': 2 } }
            ]
        },
        {
            type: 'click',
            question: "Qual famosa tendência você mais gosta?",
            options: [
                { text: "A ascensão da inteligência artificial (IA) e seu impacto na tecnologia.", points: { 'Desenvolvimento de Sistemas': 2, 'Informática para Internet': 2 } },
                { text: "A expansão do K-Pop globalmente, com suas coreografias e produções complexas.", points: { 'Marketing': 2, 'Comércio Exterior': 1 } },
                { text: "Os desafios de segurança da internet e a proteção de dados.", points: { 'Segurança do Trabalho': 2, 'Serviços Jurídicos': 1 } },
                { text: "A onda de bem-estar e saúde mental que está dominando as redes sociais.", points: { 'Recursos Humanos': 2, 'Cuidados de Idosos': 2 } }
            ]
        },
        {
            type: 'slider',
            question: "Avalie o quanto você se sente à vontade ao ter que liderar uma equipe para completar uma missão?",
            min: 0,
            max: 10,
            step: 1,
            points: {
                'Administração': 2,
                'Recursos Humanos': 1,
                'Comércio Exterior': 1
            }
        },
        {
            type: 'click',
            question: "Você tem que organizar um evento para a comunidade nerd. Qual tarefa você prefere?",
            options: [
                { text: "Gerenciar o cronograma e garantir que tudo ocorra como planejado.", points: { 'Administração': 2, 'Logística': 2 } },
                { text: "Garantir que os participantes se sintam acolhidos e tenham uma boa experiência.", points: { 'Recursos Humanos': 3, 'Cuidados de Idosos': 2 } },
                { text: "Criar o site do evento com um design incrível e uma experiência de usuário perfeita.", points: { 'Informática para Internet': 2, 'Marketing': 2 } },
                { text: "Revisar as regras de segurança e os contratos com os fornecedores.", points: { 'Serviços Jurídicos': 2, 'Segurança do Trabalho': 2 } }
            ]
        },
        {
            type: 'click',
            question: "Qual problema você preferiria resolver?",
            options: [
                { text: "Ajudar seu avô a usar o TikTok ou uma nova plataforma de streaming.", points: { 'Cuidados de Idosos': 3, 'Recursos Humanos': 2 } },
                { text: "Criar um bot que otimiza a organização de um chat no Discord.", points: { 'Logística': 3, 'Desenvolvimento de Sistemas': 2 } },
                { text: "Garantir que as regras de um torneio de e-sports sejam justas para todos.", points: { 'Segurança do Trabalho': 3, 'Administração': 1 } },
                { text: "Analisar as métricas de um canal no YouTube para entender o que viralizou.", points: { 'Marketing': 2, 'Comércio Exterior': 2 } }
            ]
        },
        {
            type: 'sentence-completion',
            question: "Num universo de animes, eu escolheria um superpoder de ... para ...",
            options: [
                { text: "hacker que invade sistemas", points: { 'Desenvolvimento de Sistemas': 3, 'Informática para Internet': 3 } },
                { text: "liderança e comunicação", points: { 'Comércio Exterior': 3, 'Recursos Humanos': 3 } },
                { text: "segurança e proteção", points: { 'Segurança do Trabalho': 3, 'Serviços Jurídicos': 2 } },
                { text: "marketing e criatividade", points: { 'Marketing': 3, 'Comércio Exterior': 2 } }
            ]
        },
        {
            type: 'click',
            question: "Você tem um tempo livre para uma nova atividade. O que você faria?",
            options: [
                { text: "Criaria um canal no YouTube ou TikTok para ensinar algo ou falar sobre um tema que amo.", points: { 'Marketing': 3, 'Comércio Exterior': 2, 'Informática para Internet': 2 } },
                { text: "Aprenderia uma nova língua ou sobre a cultura de um país distante para viajar no futuro.", points: { 'Comércio Exterior': 3, 'Marketing': 2, 'Serviços Jurídicos': 1 } },
                { text: "Desenvolveria um aplicativo ou um site para um projeto pessoal.", points: { 'Desenvolvimento de Sistemas': 3, 'Informática para Internet': 3, 'Logística': 2 } },
                { text: "Faria voluntariado em uma ONG, ajudando pessoas ou animais.", points: { 'Cuidados de Idosos': 3, 'Recursos Humanos': 3 } }
            ]
        },
        {
            type: 'sort',
            question: "Qual a ordem de importância para você em um projeto de grupo?",
            options: [
                { text: "A comunicação clara entre todos", points: { 'Recursos Humanos': 3, 'Comércio Exterior': 2, 'Administração': 1 } },
                { text: "A organização das tarefas", points: { 'Logística': 3, 'Administração': 2, 'Desenvolvimento de Sistemas': 1 } },
                { text: "O cumprimento das regras e prazos", points: { 'Serviços Jurídicos': 3, 'Segurança do Trabalho': 2, 'Logística': 1 } }
            ]
        }
    ];

    // Mini Quiz Questions
    const miniQuizQuestionsData = {
        'Administração': [
            { question: "Em um RPG, seu personagem ideal seria o:", options: [{ text: "Comandante que gerencia o time e os recursos.", points: 2 }, { text: "Guerreiro que foca em lutar, deixando a gestão para outros.", points: 1 }] },
            { question: "Em uma reunião de trabalho, você prefere:", options: [{ text: "Criar a pauta e garantir que os objetivos sejam cumpridos.", points: 2 }, { text: "Participar ativamente, mas sem a responsabilidade de liderar.", points: 1 }] },
            { question: "Qual desafio te anima mais?", options: [{ text: "Desenvolver um plano de negócios para uma startup inovadora.", points: 2 }, { text: "Criar um design de logo para um novo produto.", points: 1 }] },
            { question: "Você é mais propenso a se envolver com:", options: [{ text: "Gestão de projetos e otimização de fluxos de trabalho.", points: 2 }, { text: "Criação de conteúdo e campanhas publicitárias.", points: 1 }] }
        ],
        'Comércio Exterior': [
            { question: "Se você pudesse ter um superpoder, qual seria?", options: [{ text: "O poder de falar qualquer idioma para se comunicar com o mundo.", points: 2 }, { text: "O poder de construir qualquer coisa com a mente.", points: 1 }] },
            { question: "Você se sente mais atraído por:", options: [{ text: "Notícias sobre economia global e relações internacionais.", points: 2 }, { text: "Tendências de tecnologia e novos gadgets.", points: 1 }] },
            { question: "Em uma negociação, você é o tipo de pessoa que:", options: [{ text: "Busca o melhor acordo para ambas as partes.", points: 2 }, { text: "Prefere que outra pessoa conduza a negociação.", points: 1 }] },
            { question: "Você prefere:", options: [{ text: "Planejar uma viagem internacional com todos os detalhes de logística.", points: 2 }, { text: "Improvisar a viagem e descobrir lugares na hora.", points: 1 }] }
        ],
        'Cuidados de Idosos': [
            { question: "Quando alguém precisa de ajuda, sua primeira reação é:", options: [{ text: "Oferecer-se para ajudar de forma prática e emocional.", points: 2 }, { text: "Indicar alguém que possa ajudar.", points: 1 }] },
            { question: "Qual atividade de lazer te agrada mais?", options: [{ text: "Participar de um grupo de voluntariado na sua comunidade.", points: 2 }, { text: "Assistir a um filme de ação com alta adrenalina.", points: 1 }] },
            { question: "Qual a sua maior qualidade em um ambiente de grupo?", options: [{ text: "Empatia e capacidade de ouvir.", points: 2 }, { text: "Eficiência e foco em resultados.", points: 1 }] },
            { question: "Você se sentiria mais realizado em uma carreira que envolve:", options: [{ text: "Promover o bem-estar e a qualidade de vida de outras pessoas.", points: 2 }, { text: "Desenvolver um novo produto tecnológico.", points: 1 }] }
        ],
        'Desenvolvimento de Sistemas': [
            { question: "Qual jogo te desafia mais?", options: [{ text: "Um jogo de lógica e programação, como Zachtronics.", points: 2 }, { text: "Um jogo de estratégia em tempo real, como Age of Empires.", points: 1 }] },
            { question: "Quando você usa um aplicativo, você pensa mais sobre:", options: [{ text: "Como o código por trás dele foi escrito para funcionar tão bem.", points: 2 }, { text: "O quão bonito e intuitivo é o design da interface.", points: 1 }] },
            { question: "Qual a sua reação a um bug de software?", options: [{ text: "Fico obcecado até encontrar e consertar o problema.", points: 2 }, { text: "Fico frustrado e espero que a atualização resolva.", points: 1 }] },
            { question: "Você prefere criar o 'motor' de um site ou o design visual?", options: [{ text: "O motor (lógica)", points: 2 }, { text: "O design visual", points: 1 }] }
        ],
        'Informática para Internet': [
            { question: "Ao visitar um novo site, o que mais te chama a atenção?", options: [{ text: "A beleza e a usabilidade do design da página.", points: 2 }, { text: "A rapidez com que as páginas carregam.", points: 1 }] },
            { question: "Você prefere:", options: [{ text: "Aprender a criar animações e interfaces interativas para a web.", points: 2 }, { text: "Estudar sobre servidores e segurança de dados.", points: 1 }] },
            { question: "Qual habilidade te parece mais interessante?", options: [{ text: "Criar um portfólio online com projetos visuais incríveis.", points: 2 }, { text: "Gerenciar um banco de dados complexo.", points: 1 }] },
            { question: "Em um projeto web, você se vê mais como o:", options: [{ text: "Artista que desenha a experiência do usuário.", points: 2 }, { text: "Engenheiro que constrói a estrutura por trás.", points: 1 }] }
        ],
        'Logística': [
            { question: "Ao arrumar uma estante de livros, você:", options: [{ text: "Planeja a melhor forma de otimizar o espaço para caber mais itens.", points: 2 }, { text: "Coloca os livros onde couberem sem um plano prévio.", points: 1 }] },
            { question: "Você é o tipo de amigo que:", options: [{ text: "Sempre organiza o roteiro e os detalhes das viagens em grupo.", points: 2 }, { text: "Sempre está pronto para a aventura, mas sem se preocupar com a organização.", points: 1 }] },
            { question: "Qual cenário te gera mais satisfação?", options: [{ text: "Ver um sistema complexo funcionando de forma fluida e eficiente.", points: 2 }, { text: "Concluir uma tarefa criativa de forma brilhante.", points: 1 }] },
            { question: "Em um jogo de estratégia, você prefere focar em:", options: [{ text: "Gerenciar a cadeia de suprimentos e as rotas de transporte.", points: 2 }, { text: "Liderar as tropas em combate direto.", points: 1 }] }
        ],
        'Marketing': [
            { question: "Você se considera um bom contador de histórias?", options: [{ text: "Sim, adoro criar narrativas para engajar as pessoas.", points: 2 }, { text: "Não, prefiro ir direto ao ponto.", points: 1 }] },
            { question: "Quando você gosta de um produto, sua primeira atitude é:", options: [{ text: "Falar sobre ele para todos os seus amigos e redes sociais.", points: 2 }, { text: "Apenas usá-lo e aproveitar.", points: 1 }] },
            { question: "O que mais te atrai?", options: [{ text: "Entender o que faz um vídeo ou meme viralizar na internet.", points: 2 }, { text: "Descobrir como os eletrodomésticos funcionam.", points: 1 }] },
            { question: "Sua habilidade em redes sociais é mais voltada para:", options: [{ text: "Criar conteúdo e interagir com seguidores.", points: 2 }, { text: "Consumir conteúdo e se informar.", points: 1 }] }
        ],
        'Recursos Humanos': [
            { question: "Seu papel favorito em um grupo de trabalho é:", options: [{ text: "Resolver os problemas e garantir que todos se sintam bem.", points: 2 }, { text: "Focar apenas na sua parte da tarefa.", points: 1 }] },
            { question: "Qual habilidade você mais valoriza em uma pessoa?", options: [{ text: "Inteligência emocional e boa comunicação.", points: 2 }, { text: "Conhecimento técnico e eficiência.", points: 1 }] },
            { question: "O que te motiva mais em uma carreira?", options: [{ text: "Ajudar no desenvolvimento profissional e pessoal de outras pessoas.", points: 2 }, { text: "Trabalhar em um campo com alta demanda de tecnologia.", points: 1 }] },
            { question: "Você é mais propenso a se envolver com:", options: [{ text: "Conversas sobre sentimentos e motivações das pessoas.", points: 2 }, { text: "Discussões sobre a lógica e a eficiência de um sistema.", points: 1 }] }
        ],
        'Segurança do Trabalho': [
            { question: "Ao ver um amigo prestes a fazer algo arriscado, sua reação é:", options: [{ text: "Alertá-lo sobre o perigo e tentar convencê-lo a parar.", points: 2 }, { text: "Deixar que ele decida por si mesmo.", points: 1 }] },
            { question: "Qual a sua visão sobre regras e normas?", options: [{ text: "Elas são essenciais para manter a ordem e a segurança.", points: 2 }, { text: "Elas são um pouco restritivas e podem ser flexibilizadas.", points: 1 }] },
            { question: "Qual cenário de trabalho te atrai mais?", options: [{ text: "Inspeção de segurança em uma obra, garantindo que tudo esteja correto.", points: 2 }, { text: "Trabalho em escritório, analisando relatórios de finanças.", points: 1 }] },
            { question: "Você se sente responsável por:", options: [{ text: "Garantir a segurança e o bem-estar das pessoas ao seu redor.", points: 2 }, { text: "Apenas o seu próprio desempenho e resultados.", points: 1 }] }
        ],
        'Serviços Jurídicos': [
            { question: "Quando você assiste a um filme ou série com tema de tribunal, você:", options: [{ text: "Presta atenção aos detalhes da argumentação e das leis.", points: 2 }, { text: "Se concentra mais nos dramas e nas reviravoltas emocionais.", points: 1 }] },
            { question: "Qual tipo de leitura você prefere?", options: [{ text: "Livros e artigos que exigem atenção aos detalhes e análise crítica.", points: 2 }, { text: "Romances de ficção e fantasia.", points: 1 }] },
            { question: "Qual a sua maior qualidade para um projeto de pesquisa?", options: [{ text: "Capacidade de encontrar informações e organizar dados complexos.", points: 2 }, { text: "Facilidade em apresentar a pesquisa de forma visualmente atraente.", points: 1 }] },
            { question: "Qual cenário te atrai mais?", options: [{ text: "Analisar um contrato detalhadamente em busca de erros.", points: 2 }, { text: "Fazer uma apresentação criativa para um grande público.", points: 1 }] }
        ]
    };

    // Dados para o Jogo da Memória
    const memoryCardsData = [
        { icon: 'fas fa-laptop-code', id: 'dev' },
        { icon: 'fas fa-users', id: 'rh' },
        { icon: 'fas fa-chart-line', id: 'adm' },
        { icon: 'fas fa-bullhorn', id: 'marketing' },
        { icon: 'fas fa-truck', id: 'logistica' },
        { icon: 'fas fa-hard-hat', id: 'seguranca' },
        { icon: 'fas fa-gavel', id: 'juridico' },
        { icon: 'fas fa-globe-americas', id: 'comex' },
    ];
    
    function advanceQuiz(points, button) {
        if (button) {
            button.classList.add('selected');
        }

        for (const [course, value] of Object.entries(points)) {
            scores[course] = (scores[course] || 0) + value;
        }

        setTimeout(() => {
            if (button) {
                button.classList.remove('selected');
            }
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                updateProgressBar();
                loadQuestion();
            } else {
                showResult();
            }
        }, 500);
    }
    
    function advanceMiniQuiz(points, button) {
        if (button) {
            button.classList.add('selected');
        }
        
        miniQuizScore += points;

        setTimeout(() => {
            if (button) {
                button.classList.remove('selected');
            }
            if (currentMiniQuizQuestionIndex < miniQuizQuestions.length - 1) {
                currentMiniQuizQuestionIndex++;
                updateMiniQuizProgressBar();
                loadMiniQuizQuestion();
            } else {
                showMiniQuizResult();
            }
        }, 500);
    }

    function updateProgressBar() {
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        progressBarFill.style.width = `${progress}%`;
    }
    
    function updateMiniQuizProgressBar() {
        const progress = ((currentMiniQuizQuestionIndex + 1) / miniQuizQuestions.length) * 100;
        miniQuizProgressBarFill.style.width = `${progress}%`;
    }

    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.style.display = 'none';
        });
        document.getElementById('courses-screen').style.display = 'none';

        const targetScreen = document.getElementById(screenId);
        targetScreen.style.display = 'flex';

        if (screenId === 'quiz-screen') {
            progressBar.style.display = 'block';
            miniQuizProgressBar.style.display = 'none';
        } else if (screenId === 'mini-quiz-screen') {
            progressBar.style.display = 'none';
            miniQuizProgressBar.style.display = 'block';
        } else {
            progressBar.style.display = 'none';
            miniQuizProgressBar.style.display = 'none';
        }
    }

    function startGame() {
        currentQuestionIndex = 0;
        currentMiniGameIndex = 0;
        scores = {};
        for(const course of Object.keys(courses)) {
            scores[course] = 0;
        }
        playNextMiniGame();
    }
    
    function playNextMiniGame() {
        if (currentMiniGameIndex < miniGamesSequence.length) {
            const nextGame = miniGamesSequence[currentMiniGameIndex];
            if (nextGame === 'memory') {
                showScreen('memory-game-screen');
                setupMemoryGame();
            } else if (nextGame === 'jokenpo') {
                showScreen('rock-paper-scissors-screen');
                setupJokenpoGame();
            } else if (nextGame === 'tictactoe') {
                showScreen('tictactoe-screen');
                setupTictactoeGame();
            }
            currentMiniGameIndex++;
        } else {
            // Todos os mini-jogos foram jogados, inicie o quiz
            showScreen('quiz-screen');
            loadQuestion();
            updateProgressBar();
        }
    }
    
    function startMiniQuiz(courseName) {
        selectedMiniQuizCourse = courseName;
        miniQuizQuestions = miniQuizQuestionsData[courseName];
        currentMiniQuizQuestionIndex = 0;
        miniQuizScore = 0;
        showScreen('mini-quiz-screen');
        loadMiniQuizQuestion();
        updateMiniQuizProgressBar();
    }

    function showCourses() {
        coursesListContainer.innerHTML = '';
        for (const [name, data] of Object.entries(courses)) {
            const courseItem = document.createElement('div');
            courseItem.className = 'course-item';
            courseItem.innerHTML = `
                <div class="flex items-center mb-2">
                    <i class="${data.icon} text-2xl text-[#00a8d4] mr-2"></i>
                    <h3 class="font-bold text-[#00a8d4]">${name}</h3>
                </div>
                <p class="text-sm text-gray-600 mt-1">${data.description}</p>
                <p class="text-xs text-gray-500 mt-1">Áreas: ${data.areas}</p>
            `;
            coursesListContainer.appendChild(courseItem);
        }
        document.getElementById('courses-screen').style.display = 'block';
    }
    
    function renderClickableQuestion(question, container, advanceFunction) {
        container.innerHTML = `<div id="options-container" class="options-grid"></div>`;
        const optionsContainer = container.querySelector('#options-container');

        question.options.forEach((option) => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option.text;
            button.onclick = () => advanceFunction(option.points, button);
            optionsContainer.appendChild(button);
        });
    }

    function renderSentenceCompletionQuestion(question) {
        const parts = question.question.split('...');
        const sentenceHTML = `
            <div class="sentence-container">
                ${parts[0]}<span class="droppable-placeholder" id="sentence-placeholder"></span>${parts[1]}
            </div>
            <div id="options-container" class="options-grid"></div>
        `;
        dynamicContent.innerHTML = sentenceHTML;
        
        const optionsContainer = document.getElementById('options-container');
        const placeholder = document.getElementById('sentence-placeholder');

        question.options.forEach((option) => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option.text;
            button.setAttribute('draggable', 'true');
            button.dataset.optionId = option.text.replace(/\s+/g, '-').toLowerCase();

            button.addEventListener('dragstart', (e) => {
                draggedOptionPoints = option.points;
                e.dataTransfer.setData('text/plain', e.target.textContent);
                e.target.classList.add('opacity-50');
            });
            
            button.addEventListener('dragend', (e) => {
                e.target.classList.remove('opacity-50');
            });

            optionsContainer.appendChild(button);
        });
        
        placeholder.addEventListener('dragover', (e) => {
            e.preventDefault();
            placeholder.classList.add('active');
        });

        placeholder.addEventListener('dragleave', () => {
            placeholder.classList.remove('active');
        });
        
        placeholder.addEventListener('drop', (e) => {
            e.preventDefault();
            placeholder.classList.remove('active');
            if (draggedOptionPoints) {
                const droppedText = e.dataTransfer.getData('text/plain');
                placeholder.textContent = droppedText;
                placeholder.classList.add('filled');
                
                const selectedButton = optionsContainer.querySelector(`[data-option-id='${droppedText.replace(/\s+/g, '-').toLowerCase()}']`);
                if(selectedButton) {
                    selectedButton.classList.add('selected');
                }
                
                advanceQuiz(draggedOptionPoints, selectedButton);
                draggedOptionPoints = null;
            }
        });
    }

    function renderSliderQuestion(question) {
        questionText.textContent = question.question;
        dynamicContent.innerHTML = `
            <div class="slider-container">
                <input type="range" id="affinity-slider" class="slider" min="${question.min}" max="${question.max}" step="${question.step}" value="${(question.min + question.max) / 2}">
                <div class="slider-label">
                    <span>Discordo Totalmente</span>
                    <span>Concordo Totalmente</span>
                </div>
                <div id="slider-value-display" class="slider-value">Valor: ${(question.min + question.max) / 2}</div>
            </div>
            <button id="slider-submit-btn" class="submit-btn">Próximo</button>
        `;
        
        const slider = document.getElementById('affinity-slider');
        const valueDisplay = document.getElementById('slider-value-display');
        const submitBtn = document.getElementById('slider-submit-btn');

        slider.addEventListener('input', () => {
            valueDisplay.textContent = `Valor: ${slider.value}`;
        });

        submitBtn.addEventListener('click', () => {
            const scoreFactor = slider.value / question.max;
            const points = {};
            for (const [course, basePoints] of Object.entries(question.points)) {
                points[course] = Math.round(basePoints * scoreFactor);
            }
            advanceQuiz(points, null);
        });
    }

    function renderSortQuestion(question) {
        questionText.textContent = question.question;
        dynamicContent.innerHTML = `
            <div id="sortable-list" class="sortable-list"></div>
            <button id="sort-submit-btn" class="submit-btn">Concluir Ordem</button>
        `;
        
        const sortableList = document.getElementById('sortable-list');
        const submitBtn = document.getElementById('sort-submit-btn');

        question.options.forEach((option, index) => {
            const item = document.createElement('div');
            item.className = 'sortable-item';
            item.setAttribute('draggable', 'true');
            item.dataset.points = JSON.stringify(option.points);
            item.innerHTML = `<span class="sortable-number">${index + 1}</span><i class="fas fa-grip-lines mr-4"></i><span>${option.text}</span>`;
            sortableList.appendChild(item);
        });

        let draggingItem = null;

        const updateSortNumbers = () => {
            const items = [...sortableList.children];
            items.forEach((item, index) => {
                item.querySelector('.sortable-number').textContent = index + 1;
            });
        };

        sortableList.addEventListener('dragstart', (e) => {
            draggingItem = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.setData('text/plain', e.target.textContent);
        });

        sortableList.addEventListener('dragover', (e) => {
            e.preventDefault();
            const afterElement = getDragAfterElement(sortableList, e.clientY);
            const currentItem = document.querySelector('.dragging');
            if (afterElement == null) {
                sortableList.appendChild(currentItem);
            } else {
                sortableList.insertBefore(currentItem, afterElement);
            }
        });

        sortableList.addEventListener('dragend', (e) => {
            e.target.classList.remove('dragging');
            updateSortNumbers();
        });

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.sortable-item:not(.dragging)')];
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        submitBtn.addEventListener('click', () => {
            const orderedItems = [...sortableList.children];
            const sortedPoints = {};

            orderedItems.forEach((item, index) => {
                const itemPoints = JSON.parse(item.dataset.points);
                // A ordem correta está implícita na ordem do array original de `questions.options`
                // Vamos simplificar o scoring: o 1º item ganha mais, o 2º ganha um pouco menos, etc.
                const scoreMultiplier = (question.options.length - index) / question.options.length;
                for (const [course, basePoints] of Object.entries(itemPoints)) {
                    sortedPoints[course] = (sortedPoints[course] || 0) + Math.round(basePoints * scoreMultiplier);
                }
            });
            advanceQuiz(sortedPoints, submitBtn);
        });
    }

    function loadQuestion() {
        if (currentQuestionIndex >= questions.length) {
            showResult();
            return;
        }
        
        const question = questions[currentQuestionIndex];
        document.getElementById('question-card').className = `main-container question-card ${questionColors[currentQuestionIndex % questionColors.length]}`;
        questionText.textContent = question.question;

        switch(question.type) {
            case 'click':
                renderClickableQuestion(question, dynamicContent, advanceQuiz);
                break;
            case 'sentence-completion':
                renderSentenceCompletionQuestion(question);
                break;
            case 'slider':
                renderSliderQuestion(question);
                break;
            case 'sort':
                renderSortQuestion(question);
                break;
        }
    }
    
    function loadMiniQuizQuestion() {
        if (currentMiniQuizQuestionIndex >= miniQuizQuestions.length) {
            showMiniQuizResult();
            return;
        }
        
        const question = miniQuizQuestions[currentMiniQuizQuestionIndex];
        document.getElementById('mini-quiz-card').className = `main-container question-card ${questionColors[currentMiniQuizQuestionIndex % questionColors.length]}`;
        miniQuizQuestionText.textContent = question.question;
        
        renderClickableQuestion(question, miniQuizDynamicContent, advanceMiniQuiz);
    }
    
    function showMiniQuizResult() {
        const totalPossibleScore = miniQuizQuestions.reduce((sum, q) => sum + Math.max(...q.options.map(o => o.points)), 0);
        const percentage = totalPossibleScore > 0 ? (miniQuizScore / totalPossibleScore) * 100 : 0;
        
        miniQuizResultText.textContent = `Sua afinidade com o curso de ${selectedMiniQuizCourse} é de:`;
        miniQuizPercentage.textContent = `${Math.round(percentage)}%`;
        
        if (miniQuizChartInstance) {
            miniQuizChartInstance.destroy();
        }
        
        const ctx = document.getElementById('miniQuizChart').getContext('2d');
        miniQuizChartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Afinidade', 'Faltando'],
                datasets: [{
                    data: [percentage, 100 - percentage],
                    backgroundColor: ['#00a8d4', '#e2e8f0'],
                    hoverBackgroundColor: ['#00a8d4', '#e2e8f0'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                cutout: '80%',
                plugins: {
                    tooltip: {
                        enabled: false
                    },
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        miniQuizResultModal.style.display = 'flex';
    }

    function showResult() {
        let maxScore = -1;
        let recommendedCourse = '';
        let totalScore = 0;
        const courseAffinities = {};

        for (const [course, score] of Object.entries(scores)) {
            if (score > maxScore) {
                maxScore = score;
                recommendedCourse = course;
            }
            totalScore += score;
        }

        for (const [course, score] of Object.entries(scores)) {
             courseAffinities[course] = totalScore > 0 ? (score / totalScore) * 100 : 0;
        }

        document.getElementById('result-course').textContent = recommendedCourse;
        const courseIconElement = document.getElementById('course-icon-in-title');
        courseIconElement.className = `${courses[recommendedCourse].icon} course-icon-in-title`;
        document.getElementById('course-description').innerHTML = `
            <p class="font-bold text-gray-600 text-lg">Sobre o curso:</p>
            <p class="text-base text-gray-500 mt-2">${courses[recommendedCourse].description}</p>
            <p class="font-bold text-gray-600 text-lg mt-4">Possíveis áreas de atuação:</p>
            <p class="text-base text-gray-500 mt-2">${courses[recommendedCourse].areas}</p>
        `;
        
        renderAffinityChart(courseAffinities);
        showScreen('result-screen');
    }

    function renderAffinityChart(data) {
        if (affinityChartInstance) {
            affinityChartInstance.destroy();
        }

        const ctx = document.getElementById('affinityChart').getContext('2d');
        const chartLabels = Object.keys(data);
        const chartData = Object.values(data);
        
        const backgroundColors = [
            '#00a8d4', '#9cbb17', '#fae41e', '#fc803f', '#ee4035',
            '#00a8d4', '#9cbb17', '#fae41e', '#fc803f', '#ee4035'
        ];
        
        affinityChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: chartLabels,
                datasets: [{
                    label: 'Afinidade (%)',
                    data: chartData,
                    backgroundColor: backgroundColors,
                    borderColor: backgroundColors,
                    borderWidth: 1,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    },
                    x: {
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }
    
    function showChooseCourseScreen() {
        chooseCourseGrid.innerHTML = '';
        for (const [name, data] of Object.entries(courses)) {
            const courseItem = document.createElement('div');
            courseItem.className = 'choose-course-item';
            courseItem.innerHTML = `
                <i class="${data.icon} text-4xl text-[#00a8d4] mb-2"></i>
                <h3 class="font-bold text-gray-700">${name}</h3>
            `;
            courseItem.onclick = () => startMiniQuiz(name);
            chooseCourseGrid.appendChild(courseItem);
        }
        showScreen('choose-course-screen');
    }

    startButton.addEventListener('click', () => {
        tutorialModal.style.display = 'flex';
    });
    
    closeModalBtn.addEventListener('click', () => {
        tutorialModal.style.display = 'none';
    });

    startQuizFromModalBtn.addEventListener('click', () => {
        tutorialModal.style.display = 'none';
        startGame();
    });

    showCoursesButton.addEventListener('click', showCourses);
    startMiniQuizButton.addEventListener('click', showChooseCourseScreen);
    
    backButtonIconCourses.addEventListener('click', () => showScreen('start-screen'));
    backButtonIconChoose.addEventListener('click', () => showScreen('start-screen'));
    backButtonIconMiniQuiz.addEventListener('click', () => showScreen('choose-course-screen'));
    backButtonIconMemory.addEventListener('click', () => showScreen('start-screen'));
    backButtonIconJokenpo.addEventListener('click', () => showScreen('start-screen'));
    backButtonIconTictactoe.addEventListener('click', () => showScreen('start-screen'));

    restartButton.addEventListener('click', () => showScreen('start-screen'));
    restartMiniQuizBtn.addEventListener('click', () => {
        miniQuizResultModal.style.display = 'none';
        showChooseCourseScreen();
    });

    audioButton.addEventListener('click', () => {
        if (backgroundAudio.paused) {
            backgroundAudio.play();
            audioButton.className = 'fas fa-volume-up audio-button';
        } else {
            backgroundAudio.pause();
            audioButton.className = 'fas fa-volume-mute audio-button';
        }
    });
    
    window.addEventListener('load', () => {
        backgroundAudio.play().catch(error => {
            console.error("Autoplay foi bloqueado. Por favor, clique no botão de áudio para iniciar a música.", error);
        });
    });

    showScreen('start-screen');

    // === LÓGICA DO JOGO DA MEMÓRIA ===
    function setupMemoryGame() {
        memoryGameGrid.innerHTML = '';
        const gameCards = [...memoryCardsData, ...memoryCardsData];
        shuffle(gameCards);

        gameCards.forEach(card => {
            const cardElement = document.createElement('div');
            cardElement.className = 'memory-card';
            cardElement.dataset.cardId = card.id;
            cardElement.innerHTML = `
                <div class="front-face"><i class="${card.icon}"></i></div>
                <div class="back-face">Fetec</div>
            `;
            cardElement.addEventListener('click', flipCard);
            memoryGameGrid.appendChild(cardElement);
        });

        hasFlippedCard = false;
        lockBoard = false;
        firstCard = null;
        secondCard = null;
        matchedPairsCount = 0;
    }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return;

        this.classList.add('flip');

        if (!hasFlippedCard) {
            hasFlippedCard = true;
            firstCard = this;
            return;
        }

        secondCard = this;
        lockBoard = true;
        checkForMatch();
    }

    function checkForMatch() {
        let isMatch = firstCard.dataset.cardId === secondCard.dataset.cardId;
        
        if (isMatch) {
            disableCards();
            matchedPairsCount++;
            if (matchedPairsCount === totalPairs) {
                setTimeout(() => {
                    alert('Parabéns, você encontrou todos os pares! Vamos para a próxima fase.');
                    playNextMiniGame();
                }, 1000);
            }
        } else {
            unflipCards();
        }
    }

    function disableCards() {
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);
        resetBoard();
    }

    function unflipCards() {
        setTimeout(() => {
            firstCard.classList.remove('flip');
            secondCard.classList.remove('flip');
            resetBoard();
        }, 1500);
    }

    function resetBoard() {
        [hasFlippedCard, lockBoard] = [false, false];
        [firstCard, secondCard] = [null, null];
    }
    
    // === LÓGICA DO JOGO DA VELHA (TIC TAC TOE) ===
    function setupTictactoeGame() {
        tictactoeBoard = ['', '', '', '', '', '', '', '', ''];
        tictactoePlayer = 'X';
        tictactoeGameActive = true;
        tictactoeStatus.textContent = "Sua vez (X)";
        tictactoeRestartBtn.classList.add('hidden');
        document.querySelectorAll('.tictactoe-cell').forEach(cell => {
            cell.textContent = '';
            cell.classList.remove('win');
            cell.addEventListener('click', handleTictactoeCellClick, { once: true });
        });
    }

    function handleTictactoeCellClick(e) {
        const clickedCell = e.target;
        const clickedCellIndex = parseInt(clickedCell.getAttribute('data-cell-index'));

        if (tictactoeBoard[clickedCellIndex] !== '' || !tictactoeGameActive) {
            return;
        }

        tictactoeBoard[clickedCellIndex] = tictactoePlayer;
        clickedCell.textContent = tictactoePlayer;
        
        checkTictactoeResult();
        
        if (tictactoeGameActive) {
            tictactoePlayer = tictactoePlayer === 'X' ? 'O' : 'X';
            tictactoeStatus.textContent = `Vez da Fetec (${tictactoePlayer})`;
            if (tictactoePlayer === 'O') {
                setTimeout(handleComputerMove, 500);
            }
        }
    }
    
    function handleComputerMove() {
        if (!tictactoeGameActive) return;

        let availableCells = tictactoeBoard.map((cell, index) => cell === '' ? index : null).filter(val => val !== null);
        let computerMove = availableCells[Math.floor(Math.random() * availableCells.length)];
        
        tictactoeBoard[computerMove] = tictactoePlayer;
        document.querySelector(`[data-cell-index="${computerMove}"]`).textContent = tictactoePlayer;
        document.querySelector(`[data-cell-index="${computerMove}"]`).removeEventListener('click', handleTictactoeCellClick);

        checkTictactoeResult();
        if (tictactoeGameActive) {
            tictactoePlayer = 'X';
            tictactoeStatus.textContent = `Sua vez (X)`;
        }
    }

    function checkTictactoeResult() {
        let roundWon = false;
        for (let i = 0; i < tictactoeWinningConditions.length; i++) {
            const winCondition = tictactoeWinningConditions[i];
            let a = tictactoeBoard[winCondition[0]];
            let b = tictactoeBoard[winCondition[1]];
            let c = tictactoeBoard[winCondition[2]];

            if (a === '' || b === '' || c === '') {
                continue;
            }
            if (a === b && b === c) {
                roundWon = true;
                break;
            }
        }

        if (roundWon) {
            tictactoeStatus.textContent = `O jogador ${tictactoePlayer} venceu!`;
            tictactoeGameActive = false;
            tictactoeRestartBtn.classList.remove('hidden');
            if (tictactoePlayer === 'X') {
                setTimeout(() => {
                    alert('Parabéns, você venceu a Fetec! Vamos para a próxima fase.');
                    playNextMiniGame();
                }, 1000);
            }
            return;
        }

        let roundDraw = !tictactoeBoard.includes('');
        if (roundDraw) {
            tictactoeStatus.textContent = 'Empate!';
            tictactoeGameActive = false;
            tictactoeRestartBtn.classList.remove('hidden');
            return;
        }
    }

    tictactoeRestartBtn.addEventListener('click', setupTictactoeGame);
    document.querySelectorAll('.tictactoe-cell').forEach(cell => cell.addEventListener('click', handleTictactoeCellClick));
    
    // === LÓGICA DO PEDRA, PAPEL E TESOURA (JOKENPÔ) ===
    function setupJokenpoGame() {
        jokenpoWins = 0;
        jokenpoResult.textContent = 'Faça sua jogada!';
        jokenpoScore.textContent = `Vitórias: ${jokenpoWins} de ${jokenpoTargetWins}`;
    }

    jokenpoButtons.forEach(button => {
        button.addEventListener('click', () => {
            const playerChoice = button.id.replace('jokenpo-', '');
            const choices = ['rock', 'paper', 'scissors'];
            const computerChoice = choices[Math.floor(Math.random() * choices.length)];

            let result = '';
            if (playerChoice === computerChoice) {
                result = 'Empate!';
            } else if (
                (playerChoice === 'rock' && computerChoice === 'scissors') ||
                (playerChoice === 'paper' && computerChoice === 'rock') ||
                (playerChoice === 'scissors' && computerChoice === 'paper')
            ) {
                result = 'Você Venceu!';
                jokenpoWins++;
            } else {
                result = 'Você Perdeu!';
            }

            jokenpoResult.textContent = `Você escolheu ${getEmoji(playerChoice)}, o computador escolheu ${getEmoji(computerChoice)}. ${result}`;
            jokenpoScore.textContent = `Vitórias: ${jokenpoWins} de ${jokenpoTargetWins}`;

            if (jokenpoWins >= jokenpoTargetWins) {
                setTimeout(() => {
                    alert('Parabéns, você venceu o suficiente! Vamos para a próxima fase.');
                    playNextMiniGame();
                }, 1000);
            }
        });
    });

    function getEmoji(choice) {
        if (choice === 'rock') return 'Pedra';
        if (choice === 'paper') return 'Papel';
        if (choice === 'scissors') return 'Tesoura';
        return '';
    }
</script>
</body>
</html>